<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Service (http_async.Http_async.Service)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0-96-g0e62e03"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">http_async</a> &#x00BB; <a href="../index.html">Http_async</a> &#x00BB; Service</nav><header class="odoc-preamble"><h1>Module <code><span>Http_async.Service</span></code></h1><p><code>Service</code> is the core abstraction that represents an HTTP server within http_async.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-request"><a href="#type-request" class="anchor"></a><code><span><span class="keyword">type</span> request</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_of_request"><a href="#val-sexp_of_request" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_request : <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-response"><a href="#type-response" class="anchor"></a><code><span><span class="keyword">type</span> response</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_of_response"><a href="#val-sexp_of_response" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_response : <span><a href="#type-response">response</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-response">response</a> <span class="xref-unresolved">Async</span>.Deferred.t</span></span></code></div><div class="spec-doc"><p><code>t</code> is a function that takes a HTTP request and returns a deferred HTTP response.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-resource"><a href="#val-resource" class="anchor"></a><code><span><span class="keyword">val</span> resource : <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>resource</code> returns the path and query for a given request.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-meth"><a href="#val-meth" class="anchor"></a><code><span><span class="keyword">val</span> meth : <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Meth/index.html#type-t">Meth.t</a></span></code></div><div class="spec-doc"><p><code>meth</code> returns the HTTP verb for a given request.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-body"><a href="#val-body" class="anchor"></a><code><span><span class="keyword">val</span> body : <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Core</span>.Bigstring.t <span class="xref-unresolved">Core_unix</span>.IOVec.t</span> <span class="xref-unresolved">Async</span>.Pipe.Reader.t</span></span></code></div><div class="spec-doc"><p><code>body</code> returns the HTTP request body for a given request.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-header"><a href="#val-header" class="anchor"></a><code><span><span class="keyword">val</span> header : <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>header request key</code> returns the last header value associates with <code>key</code> if one exists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-header_multi"><a href="#val-header_multi" class="anchor"></a><code><span><span class="keyword">val</span> header_multi : <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>header_multi request key</code> returns a list of all header values associated with <code>key</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-respond_string"><a href="#val-respond_string" class="anchor"></a><code><span><span class="keyword">val</span> respond_string : 
  <span>?headers:<span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?status:<a href="../Status/index.html#type-t">Status.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-response">response</a> <span class="xref-unresolved">Async</span>.Deferred.t</span></span></code></div><div class="spec-doc"><p><code>respond_string</code> creates a new fixed length encoded response from the user provided string. If the user provided headers don't contain a Content-Length header, one is added with the value set to the string's length.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-respond_bigstring"><a href="#val-respond_bigstring" class="anchor"></a><code><span><span class="keyword">val</span> respond_bigstring : 
  <span>?headers:<span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?status:<a href="../Status/index.html#type-t">Status.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Core</span>.Bigstring.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-response">response</a> <span class="xref-unresolved">Async</span>.Deferred.t</span></span></code></div><div class="spec-doc"><p><code>respond_bigstring</code> creates a new fixed length encoded response from the user provided <code>Bigstring.t</code>. If the user provided headers don't contain a Content-Length header, one is added with the value set to the bigstring's length.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-respond_stream"><a href="#val-respond_stream" class="anchor"></a><code><span><span class="keyword">val</span> respond_stream : 
  <span>?headers:<span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?status:<a href="../Status/index.html#type-t">Status.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="xref-unresolved">Core</span>.Bigstring.t <span class="xref-unresolved">Core_unix</span>.IOVec.t</span> <span class="xref-unresolved">Async</span>.Pipe.Reader.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-response">response</a> <span class="xref-unresolved">Async</span>.Deferred.t</span></span></code></div><div class="spec-doc"><p><code>respond_stream</code> creates a new streaming response. The data is chunk-encoded before its sent over the wire.</p></div></div></div></body></html>